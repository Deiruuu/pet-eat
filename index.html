<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pet Details Fallback</title>
    <!-- Link to Google Fonts for 'Inter' -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Link to your custom CSS file -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="app-container">
        <h1>Pet Details</h1>
        <div id="pet-info">
            <!-- This content will be replaced by JavaScript once details are loaded -->
            <p class="loading-message">Loading pet details...</p>
        </div>
        <div class="button-container">
            <!-- Button to go back to the home page -->
            <a href="/" class="button">Go to Home</a>
        </div>
    </div>

    <script>
        // JavaScript logic for handling pet details - NOW EMBEDDED DIRECTLY IN HTML
        document.addEventListener('DOMContentLoaded', () => {
            const petInfoDiv = document.getElementById('pet-info');
            const path = window.location.pathname; // Get the full path, e.g., /pet/abc123 or /pet/

            // This is your mock data. In a real application, this would come from an API or database.
            const mockPetData = {
                'abc123': { name: 'Buddy', type: 'Dog', age: 3, breed: 'Golden Retriever', description: 'A friendly and energetic dog who loves to play fetch.' },
                'xyz789': { name: 'Whiskers', type: 'Cat', age: 2, breed: 'Siamese', description: 'A curious and cuddly cat, enjoys naps in sunbeams.' },
                'pqr456': { name: 'Hoppy', type: 'Rabbit', age: 1, breed: 'Dutch', description: 'A small, adorable rabbit who loves carrots and quiet spaces.' }
            };

            /**
             * Extracts the pet ID from the current URL path.
             * It assumes the URL format is '/pet/{petId}'.
             * For example, given '/pet/abc123', it returns 'abc123'.
             * @param {string} currentPath - The full URL path (e.g., '/pet/abc123').
             * @returns {string|null} The extracted pet ID, or null if no valid ID is found.
             */
            const getPetIdFromPath = (currentPath) => {
                const parts = currentPath.split('/');
                // Example path: ["", "pet", "abc123"]
                // We want the part after "pet", which is at index 2 if "pet" is at index 1.
                const petSegmentIndex = parts.indexOf('pet');

                // Check if 'pet' segment exists and if there's a segment immediately after it
                // and if that segment is not empty (to handle '/pet/' vs '/pet/id')
                if (petSegmentIndex > -1 && parts.length > petSegmentIndex + 1 && parts[petSegmentIndex + 1]) {
                    const potentialId = parts[petSegmentIndex + 1];
                    if (potentialId) {
                        return potentialId;
                    }
                }
                return null; // No valid pet ID found in the path
            };

            const petId = getPetIdFromPath(path); // Get the ID from the URL

            console.log("Current URL path:", path); // Log the full path
            console.log("Extracted Pet ID:", petId); // Log the extracted ID

            // --- Logic to display pet details based on the extracted ID ---
            if (petId) {
                // An ID was successfully extracted from the URL
                const pet = mockPetData[petId]; // Try to find the pet in our mock data

                if (pet) {
                    // If the pet exists in our mock data, display its details
                    petInfoDiv.innerHTML = `
                        <p><strong>ID:</strong> ${petId}</p>
                        <p><strong>Name:</strong> ${pet.name}</p>
                        <p><strong>Type:</strong> ${pet.type}</p>
                        <p><strong>Age:</strong> ${pet.age} years</p>
                        <p><strong>Breed:</strong> ${pet.breed}</p>
                        <p class="description">${pet.description}</p>
                    `;
                } else {
                    // If an ID was found in the URL but the pet is NOT in mockPetData
                    petInfoDiv.innerHTML = `
                        <p class="error-message">Pet with ID "${petId}" not found.</p>
                        <p class="info-message">Please check the ID and try again.</p>
                        <p class="info-message">Available IDs: abc123, xyz789, pqr456</p>
                    `;
                }
            } else {
                // If no specific pet ID was found in the URL (e.g., path is just '/pet/' or '/')
                petInfoDiv.innerHTML = `
                    <p class="warning-message">No specific pet ID provided in the URL.</p>
                    <p class="info-message">Try accessing: <a href="/pet/abc123" class="link">/pet/abc123</a> or <a href="/pet/xyz789" class="link">/pet/xyz789</a></p>
                `;
            }
        });
    </script>
</body>
</html>
